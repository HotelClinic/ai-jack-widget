<!-- Trigger redeploy -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>AI Jack Widget</title>
  </head>
  <body>
    <script>
    !function(window){
      const host = "https://labs.heygen.com";
      const url = host + "/guest/streaming-embed?share=eyJxdWFsaXR5IjoiaGlnaCIsImF2YXRhck5hbWUiOiJHcmFoYW1fQmxhY2tfU3VpdF9wdWJsaWMi%0D%0ALCJwcmV2aWV3SW1nIjoiaHR0cHM6Ly9maWxlczIuaGV5Z2VuLmFpL2F2YXRhci92My9lMDRlYmFi%0D%0AY2M2Nzg0Y2I2OTU5YTg2NjYwNTQ3NDY1MF81NTM1MC9wcmV2aWV3X3RhbGtfMS53ZWJwIiwibmVl%0D%0AZFJlbW92ZUJhY2tncm91bmQiOnRydWUsImtub3dsZWRnZUJhc2VJZCI6IjU3MmJhNzQ4ZGJhODQ4%0D%0AODFiZGY4YzhmYTMxYjhiMWMyIiwidXNlcm5hbWUiOiI1YzFkZGFjNTc5Nzg0M2M4YmE0MjY0NGRh%0D%0AMWRhZjNmMyJ9&inIFrame=1";

      const wrapDiv = document.createElement("div");
      wrapDiv.id = "heygen-streaming-embed";
      wrapDiv.classList.add("show", "expand");

      const container = document.createElement("div");
      container.id = "heygen-streaming-container";

      const stylesheet = document.createElement("style");
      stylesheet.innerHTML = `
        #heygen-streaming-embed {
          z-index: 9999;
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 90vw;
          max-width: 1280px;
          height: calc(90vw * 9 / 16);
          max-height: 720px;
          border-radius: 8px;
          border: none;
          box-shadow: 0px 8px 24px rgba(0, 0, 0, 0.12);
          transition: all linear 0.1s;
          overflow: hidden;
          opacity: 1;
          visibility: visible;
        }
        #heygen-streaming-container {
          width: 100%;
          height: 100%;
        }
        #heygen-streaming-container iframe {
          width: 100%;
          height: 100%;
          border: 0;
        }
      `;

      const iframe = document.createElement("iframe");
      iframe.allowFullscreen = false;
      iframe.title = "Streaming Embed";
      iframe.role = "dialog";
      iframe.allow = "microphone";
      iframe.src = url;

      iframe.onload = () => {
        iframe.contentWindow.postMessage(
          { type: "streaming-embed", action: "show" },
          host
        );
      };

      window.addEventListener("message", (e) => {
        if (e.origin === host && e.data?.type === "streaming-embed") {
          if (e.data.action === "init") {
            wrapDiv.classList.add("show", "expand");
          } else if (e.data.action === "show") {
            wrapDiv.classList.add("expand");
          } else if (e.data.action === "hide") {
            wrapDiv.classList.remove("expand");
          }
        }
      });

      container.appendChild(iframe);
      wrapDiv.appendChild(stylesheet);
      wrapDiv.appendChild(container);
      document.body.appendChild(wrapDiv);
    }(globalThis);
    </script>
  </body>
</html>
